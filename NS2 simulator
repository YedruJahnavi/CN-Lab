Experiment- 16
Do the following using NS2 Simulator
i. NS2 Simulator-Introduction
ii. Simulate to Find the Number of Packets Dropped
iii. Simulate to Find the Number of Packets Dropped by TCP/UDP
iv. Simulate to Find the Number of Packets Dropped due to Congestion

i. NS2 Simulator - Introduction
●	NS2 is an event-driven simulation tool for networking research.
●	Simulations are written in Tcl scripts.
●	Typical steps:
1.	Create Simulator object: set ns [new Simulator]
2.	Define nodes, links, agents (TCP/UDP), and applications (FTP/CBR).
3.	Specify trace and NAM output files.
4.	Execute events and run: $ns run
5.	Analyze trace file for results.

ii. Simulate to Find the Number of Packets Dropped
Sample Tcl Script:
set ns [new Simulator]
set nf [open out.nam w]
$ns namtrace-all $nf
set tf [open out.tr w]
$ns trace-all $tf

set n0 [$ns node]
set n1 [$ns node]
$ns duplex-link $n0 $n1 1Mb 10ms DropTail

set udp [new Agent/UDP]
$ns attach-agent $n0 $udp
set null [new Agent/Null]
$ns attach-agent $n1 $null
$ns connect $udp $null

set cbr [new Application/Traffic/CBR]
$cbr attach-agent $udp
$ns at 0.1 "$cbr start"
$ns at 4.5 "$cbr stop"
$ns at 5.0 "finish"

proc finish {} {
    global ns tf nf
    $ns flush-trace
    close $tf
    close $nf
    exec nam out.nam &
    exit 0
}
$ns run
●	Run simulation: ns script.tcl
●	Analyze packet drops: grep "^d" out.tr | wc -l (counts lines starting with "d")
iii. Simulate to Find the Number of Packets Dropped by TCP/UDP
●	Use both TCP and UDP agents in one simulation.
●	After running, filter trace like:
●	Packet drops for UDP: grep "^d.*UDP" out.tr | wc -l
●	Packet drops for TCP: grep "^d.*TCP" out.tr | wc -l
●	The trace file marks transport type per event, use AWK or grep for protocol-specific counts.

iv. Simulate to Find the Number of Packets Dropped due to Congestion
●	Create a bottleneck by connecting multiple sources to one receiver via a single link with limited bandwidth.
●	Example analysis (after simulation):

TCL
# After simulation:
grep "^d" out.tr | wc -l                       # Total drops
grep "^d.*<bottleneck node number>" out.tr | wc -l   # Drops at congestion point
●	In the Tcl script, set up several sources (n0, n1) sending to a single receiver (n2) over a shared, bandwidth-limited link.
●	Analyze trace to find drops at congested nodes.

Trace analysis method:
●	Look for "d" (drop) events in trace; congestion usually occurs at links with high incoming rate vs. low bandwidth.

